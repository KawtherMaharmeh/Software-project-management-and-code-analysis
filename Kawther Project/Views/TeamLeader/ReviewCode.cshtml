<!DOCTYPE html>
<html lang="ar">

<head>


    <style>
        .new {
            width: 100%;
            background-color: #F6B784;
            display: flex;
            justify-content: space-between;
            padding: 20px;
            box-sizing: border-box;
            border: solid black 2px;
            border-radius: 100px;
            margin: 20px;
            box-shadow: 5px 2px 15px rgba(0, 0, 0, 0.3);
        }

        .divHeader {
            width: 100%;
            background-color: #f5bc8e;
            display: flex;
            justify-content: space-between;
            padding: 20px;
            box-sizing: border-box;
            border: solid black 2px;
            border-radius: 100px;
            margin: 20px;
            box-shadow: 5px 2px 15px rgba(0, 0, 0, 0.3);
        }

        .new:hover {
            background-color: #f9c499;
            transform: scale(1.05);
            transition: 0.3s ease-in-out;
        }

        p {
            margin: 0;
            font-size: 15px;
            text-align: center;
            flex: 1;
        }

        .header {
            font-weight: bold;
        }

        table {
            border: 5px solid black;
        }

        button:hover {
            transform: scale(1.20);
            transition: 0.3s ease-in-out;
        }

        a {
            text-decoration: none;
            color: black;
        }

        #analyzeBtn{
            cursor: pointer;
            background-color: black;
            color: white;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 5px 2px 15px rgba(0, 0, 0, 0.3);
            border: 2px solid black;
            margin: 0 25px
        }
    </style>

</head>

<body>

    <div class="container mt-4 wow fadeInUp" data-wow-delay="0.3s">
        <div class="row justify-content-center align-items-center text-center gy-4">
            <!-- الكود التحليلي -->
            <div class="col-12 col-md-5">
                <h2 data-translate="ResultAnalysisCode">Result Analysis The Code</h2>
                <textarea id="analysisResult"
                          class="form-control"
                          style="height: 400px; border: 2px solid black; border-radius: 10px; padding: 10px; font-size: 16px;"
                          readonly disabled></textarea>
            </div>

            <!-- الزر -->
            <div class="col-12 col-md-2 d-flex justify-content-center">
                <button id="analyzeBtn" class="btn btn-primary h-100" style="min-height: 50px;">
                    <span id="btnText" data-translate="AnalysisCode">Analysis Code</span>
                    <div id="btnSpinner" class="hidden">Wait Analysis</div>
                    <div id="btnSpinner" class="spinner hidden"></div>
                </button>
            </div>

            <!-- الكود الأصلي -->
            <div class="col-12 col-md-5">
                <h2 data-translate="code1">The Code</h2>
                <textarea id="userCode"
                          class="form-control"
                          style="height: 400px; border: 2px solid black; border-radius: 10px; padding: 10px; font-size: 16px;"></textarea>
            </div>
        </div>
    </div>

    <script>
        document.getElementById("analyzeBtn").addEventListener("click", async () => {
            const userCode = document.getElementById("userCode").value;
            const btnText = document.getElementById("btnText");
            const btnSpinner = document.getElementById("btnSpinner");
            const analysisResult = document.getElementById("analysisResult");

            btnText.classList.add("hidden");
            btnSpinner.classList.remove("hidden");

            document.getElementById("analyzeBtn").disabled = true;

            try {
                const response = await fetch("/TeamLeader/ReviewCode", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ code: userCode })
                });

                const result = await response.text();
                analysisResult.value = result;
            } catch (err) {
                analysisResult.value = "Error during analysis: " + err.message;
            }

            btnText.classList.remove("hidden");
            btnSpinner.classList.add("hidden");
            document.getElementById("analyzeBtn").disabled = false;
        });
    </script>

</body>

</html>